<app-custom-toastr></app-custom-toastr>
<app-loading></app-loading>

<nav class="fr-container" role="navigation" aria-label="Accès rapide">
  <ul id="skip-links">
    <li>
      <a
        class="m-1 btn btn-sm btn-primary"
        [routerLink]="currentUrl"
        fragment="navigation"
        >Aller à la navigation</a
      >
    </li>
    <li>
      <a
        class="m-1 btn btn-sm btn-primary"
        [routerLink]="currentUrl"
        fragment="page"
        >Aller au contenu</a
      >
    </li>
    <li>
      <a
        class="m-1 btn btn-sm btn-primary"
        [routerLink]="currentUrl"
        fragment="footer"
        >Aller au pied de page</a
      >
    </li>
  </ul>
</nav>
<app-navbar
  id="navigation"
  [tabIndex]="currentFragment === 'navigation' ? 1 : -1"
></app-navbar>

<div class="d-print-none" id="help-button-wrapper" *ngIf="me">
  <button type="button" class="btn" id="help-button" (click)="openHelpModal()">
    <span class="sr-only">Besoin d'aide ?</span>
    <fa-icon [icon]="['fas', 'question']"></fa-icon>
  </button>
</div>

<main id="page" [tabIndex]="currentFragment === 'page' ? 1 : -1">
  <router-outlet></router-outlet>
</main>

<footer
  [tabIndex]="currentFragment === 'footer' ? 1 : -1"
  role="contentinfo"
  id="footer"
  class="d-print-none page-footer py-4"
  #footer
>
  <div class="container">
    <div class="my-2">
      <div class="mb-3 mb-sm-0">Nos partenaires:</div>
      <div class="d-flex flex-column flex-sm-row">
        <a
          class="flex-sm-grow-1 text-‡start me-sm-5"
          href="https://www.fabrique.social.gouv.fr"
          target="_blank"
          rel="noopener noreferrer"
          (click)="
            matomo.trackEvent('FOOTER', 'Footer_Logo_Fabrique', 'null', 1)
          "
        >
          <img
            class="ministere-logo"
            src="../assets/images/footer/partenaire-fabrique-numerique.png"
            alt="La Fabrique Numérique"
          />
        </a>
        <a
          class="me-0 me-sm-3"
          href="https://beta.gouv.fr"
          target="_blank"
          rel="noopener noreferrer"
          (click)="matomo.trackEvent('FOOTER', 'Footer_Logo_Beta', 'null', 1)"
        >
          <img
            class="ministere-logo"
            src="../assets/images/footer/partenaire-beta-gouv.png"
            alt="Beta Gouv"
          />
        </a>
        <a
          class="me-0 me-sm-3"
          href="https://www.gouvernement.fr/france-relance"
          target="_blank"
          rel="noopener noreferrer"
          (click)="
            matomo.trackEvent('FOOTER', 'Footer_Logo_FranceRelance', 'null', 1)
          "
        >
          <img
            class="ministere-logo"
            src="../assets/images/footer/logo-france-relance.svg"
            alt="France Relance soutien DomiFa"
          />
        </a>
        <a
          class="me-0 me-sm-3"
          href="https://www.gouvernement.fr/delegation-interministerielle-a-l-hebergement-et-a-l-acces-au-logement"
          target="_blank"
          rel="noopener noreferrer"
          (click)="matomo.trackEvent('FOOTER', 'Footer_Logo_DIHAL', 'null', 1)"
        >
          <img
            class="ministere-logo"
            src="../assets/images/footer/partenaire-dihal.png"
            alt="DIHAL"
          />
        </a>
        <a
          class="me-0 me-sm-3"
          (click)="matomo.trackEvent('FOOTER', 'Footer_Logo_DGCS', 'null', 1)"
          href="https://www.gouvernement.fr/le-ministere-des-solidarites-et-de-la-sante"
          target="_blank"
          rel="noopener noreferrer"
        >
          <img
            class="ministere-logo"
            src="../assets/images/footer/logo-dgcs.png"
            alt="DGCS"
          />
        </a>
        <a
          href="https://www.unccas.org"
          target="_blank"
          rel="noopener noreferrer"
          (click)="matomo.trackEvent('FOOTER', 'Footer_Logo_UNCCAS', 'null', 1)"
        >
          <img
            class="ministere-logo"
            src="../assets/images/footer/partenaire-unccas.png"
            alt="UNCCAS"
          />
        </a>
      </div>
    </div>
    <div class="py-3 my-4 text-gray border-top">
      <div class="d-flex flex-column flex-sm-row">
        <a
          href="/assets/files/domifa_declaration-d-accessibilite.pdf"
          target="_blank"
          rel="noopener noreferrer"
          download
          >Accessibilité: non conforme
        </a>
        <span class="menu-breadcrumb d-none d-sm-block mt-2 mt-sm-0">|</span>
        <a
          [routerLink]="['/mentions-legales']"
          routerLinkActive="router-link-active"
          (click)="
            matomo.trackEvent('FOOTER', 'Footer_Mentions_Légales', 'null', 1)
          "
        >
          Mentions légales
        </a>
        <span class="menu-breadcrumb d-none d-sm-block mt-2 mt-sm-0">|</span>
        <a
          [routerLink]="['/cgu']"
          routerLinkActive="router-link-active"
          (click)="matomo.trackEvent('FOOTER', 'Footer_CGU', 'null', 1)"
        >
          CGU
        </a>
        <span class="menu-breadcrumb d-none d-sm-block mt-2 mt-sm-0">|</span>
        <a
          routerLink="/confidentialite"
          title="Lire notre politique de confidentialité"
          routerLinkActive="router-link-active"
        >
          Politique de confidentialité
        </a>
        <span class="menu-breadcrumb d-none d-sm-block mt-2 mt-sm-0">|</span>
        <a
          [routerLink]="['/news']"
          routerLinkActive="router-link-active"
          (click)="matomo.trackEvent('FOOTER', 'Footer_Nouveautés', 'null', 1)"
        >
          Nouveautés
        </a>
        <span class="menu-breadcrumb d-none d-sm-block mt-2 mt-sm-0">|</span>
        <a
          [routerLink]="['/stats']"
          routerLinkActive="router-link-active"
          (click)="matomo.trackEvent('FOOTER', 'Footer_Stats', 'null', 1)"
        >
          Statistiques
        </a>
        <span class="menu-breadcrumb d-none d-sm-block mt-2 mt-sm-0">|</span>
        <a
          [routerLink]="['/faq']"
          routerLinkActive="router-link-active"
          (click)="matomo.trackEvent('FOOTER', 'Footer_Faq', 'null', 1)"
        >
          Foire aux questions
        </a>
        <span class="menu-breadcrumb d-none d-sm-block mt-2 mt-sm-0">|</span>
        <a
          [routerLink]="['/contact']"
          routerLinkActive="router-link-active"
          (click)="matomo.trackEvent('FOOTER', 'Footer_Contact', 'null', 1)"
        >
          Contactez-nous
        </a>
        <span class="menu-breadcrumb d-none d-sm-block mt-2 mt-sm-0">|</span>
        <a
          routerLink="/plan-site"
          routerLinkActive="router-link-active"
          (click)="matomo.trackEvent('FOOTER', 'Footer_Contact', 'null', 1)"
        >
          Plan du site
        </a>
      </div>
      <div class="my-4 text-gray">
        Sauf mention contraire, tous les textes de ce site sont sous
        <a
          href="https://github.com/etalab/licence-ouverte/blob/master/LO.md"
          target="_blank"
          rel="noopener noreferrer"
          >licence etalab-2.0</a
        >
        <img
          src="../../../assets/icones/link-external.png"
          class="ms-1"
          style="height: 8px"
          alt="Lien externe"
        />
      </div>
    </div>
  </div>
</footer>

<ng-template #maintenanceModal let-modal>
  <div class="modal-header">
    <span class="modal-title" id="modal-title">
      ⚠️ Maintenance de DomiFa en cours ⚠️
    </span>
  </div>
  <div class="modal-body text-center">
    <p>
      Veuillez nous excuser pour la gêne occasionnée.
      <br />
      Vous pourrez de nouveau utiliser DomiFa dans quelques minutes.
      <br /><br />
      Cette fenêtre disparaitra dès la fin de la maintenance.
    </p>
  </div>
</ng-template>

<ng-template #versionModal let-modal>
  <div class="modal-header">
    <span class="modal-title" id="modal-title">
      ℹ️ Une nouvelle version de DomiFa est disponible
    </span>
  </div>

  <div class="modal-body text-center py-4">
    <p>
      Afin de profiter des nouveautés de Domifa, vous devez actualiser la page.
    </p>

    <button class="btn btn-primary" (click)="refresh()">
      <fa-icon [icon]="['fas', 'sync']"></fa-icon> Actualiser
    </button>
  </div>
</ng-template>

<ng-template #helpCenter let-modal>
  <div class="modal-header">
    <h4 class="modal-title" id="modal-title">Centre d'aide Domifa</h4>
    <button
      title="Fermer la fenêtre"
      class="btn-close"
      aria-label="Fermer la fenêtre"
      (click)="closeHelpModal()"
    ></button>
  </div>
  <div class="modal-body text-center">
    <h4>Notre guide d'utilisateur peut vous accompagner</h4>
    <p>
      <a
        href="/assets/files/guide_utilisateur_domifa.pdf"
        target="_blank"
        rel="noopener noreferrer"
        class="btn btn-primary"
        download
      >
        <fa-icon [icon]="['fas', 'download']"></fa-icon>
        Télécharger notre guide utilisateur
      </a>
    </p>
    <h4>Vous vous posez une question ?</h4>
    <p>
      <a
        [routerLink]="['/faq']"
        (click)="modalService.dismissAll()"
        class="btn btn-primary"
        routerLinkActive="router-link-active"
      >
        Consultez notre FAQ
      </a>
      <br />
      <br />
      <a
        [routerLink]="['/contact']"
        (click)="modalService.dismissAll()"
        class="btn btn-primary"
        routerLinkActive="router-link-active"
      >
        Contactez-nous via notre formulaire de contact</a
      >
    </p>
  </div>
</ng-template>
