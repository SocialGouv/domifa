<form [formGroup]="addNoteForm" (ngSubmit)="submit()">
  <p>
    Les champs suivis d'un
    <span class="fr-text--bold text-error">*</span> sont obligatoires
  </p>

  <div
    class="fr-input-group"
    [class.fr-input-group--error]="
      (f.message.dirty || submitted) && f.message.errors
    "
  >
    <label class="fr-label" for="message">
      Motif d'ajournement du dossier (Exemples: document manquant, dossier
      incomplet, etc.)
    </label>
    <textarea
      class="fr-input"
      formControlName="message"
      id="message"
      maxlength="1000"
      appCleanStr
      required
      [attr.aria-describedby]="
        (f.message.dirty || submitted) && f.message.errors
          ? 'message-errors'
          : 'message-informations'
      "
      [attr.aria-invalid]="
        (f.message.dirty || submitted) && f.message.errors ? true : false
      "
    ></textarea>
    @if ((!f.message.dirty && !submitted) || !f.message.errors) {
    <p id="message-informations" class="fr-hint-text">
      1000 caractères maximum. Caractères interdits:
      &#36;&#126;&#42;&lt;&gt;&#123;&#125;
    </p>
    } @if ((submitted || f.message.dirty) && f.message.errors) {
    <p id="message-errors" class="fr-error-text">
      Veuillez vérifier le contenu de la note saisie. 1000 caractères maximum.
      Caractères interdits: &#36;&#126;&#42;&lt;&gt;&#123;&#125;
    </p>
    }
  </div>

  <div class="fr-btns-group fr-btns-group--inline fr-btns-group--right">
    <button
      type="button"
      class="fr-btn fr-btn--secondary"
      (click)="closeModals.emit()"
    >
      Annuler
    </button>
    <button
      type="submit"
      class="fr-btn"
      [disabled]="loading"
      [attr.aria-busy]="loading"
    >
      @if (!loading) { Confirmer l'ajournement } @else { Veuillez patienter... }
    </button>
  </div>
</form>
