<div class="steps fr-pb-4w">
  @if (isMobile) {
  <div class="fr-hidden fr-unhidden-md fr-py-2w">
    <label class="fr-label" for="form-menu">Étapes du formulaire</label>
    <select
      class="fr-select"
      id="form-menu"
      [ngModel]="currentStep"
      (change)="changeStep($event)"
    >
      @for (etape of ETAPES_FORM_DOM; track $index; let i = $index) {
      <option [value]="i">
        Étape {{ i + 1 }} sur 5 du formulaire, {{ ETAPES_FORM_DOM_TITRES[i] }}.
      </option>
      }
    </select>
  </div>
  } @else {
  <nav id="steps" aria-label="Étapes du formulaire de demande de domiciliation">
    <div class="fr-pb-4w">
      <span class="fr-text--sm fr-text--grey">
        Étape {{ currentStep + 1 }} sur 5: {{ ETAPES_FORM_DOM[currentStep] }}
      </span>
    </div>

    <div class="fr-grid-row fr-grid-row--center fr-grid-row--middle">
      @for ( etape of ETAPES_FORM_DOM; track $index; let i = $index ) {
      <div
        class="step fr-col"
        role="button"
        tabindex="0"
        (click)="goToStep(i)"
        (keydown.enter)="goToStep(i)"
        (keydown.space)="goToStep(i)"
        [attr.aria-label]="'Aller à l\'étape ' + (i + 1)"
      >
        <div
          [ngClass]="{ 'stepper-step--completed': currentStep > i }"
          class="fr-flex fr-flex--center"
        >
          <div class="fr-grid-row fr-grid-row--middle">
            <div class="col fr-flex fr-flex--center fr-flex--column">
              <img
                [src]="
                  'artwork/pictograms/' + ETAPES_FORM_DOM_ICONES[i] + '.svg'
                "
                alt=""
                class="step-icon"
                aria-hidden="true"
              />

              <span class="step-text">
                {{ ETAPES_FORM_DOM[i] }}
              </span>
            </div>
            @if (currentStep >= i) {
            <div class="col-auto">
              <span
                class="fr-icon-success-fill fr-text-default--success"
                aria-hidden="true"
              ></span>
            </div>
            }
          </div>
        </div>

        <div
          class="stepper-line"
          [class.stepper-line--completed]="currentStep >= i"
        ></div>
      </div>
      }
    </div>
  </nav>
  }
</div>
