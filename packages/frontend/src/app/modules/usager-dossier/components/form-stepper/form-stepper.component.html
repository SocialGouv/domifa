<div class="steps fr-py-4w">
  @if (isMobile) {
  <div class="fr-hidden fr-unhidden-md fr-py-3w">
    <label class="fr-label" for="form-menu">Étapes du formulaire</label>
    <select
      class="fr-select"
      id="form-menu"
      [ngModel]="currentStep"
      (change)="changeStep($event)"
    >
      @for (etape of ETAPES_FORM_DOM; track $index; let i = $index) {
      <option [value]="i">
        Étape {{ i + 1 }} sur 5 du formulaire, {{ ETAPES_FORM_DOM_TITRES[i] }}.
      </option>
      }
    </select>
  </div>
  } @else {
  <nav id="steps" aria-label="Étapes du formulaire de demande de domiciliation">
    <div class="fr-pb-4w">
      <span class="fr-text--sm fr-text--grey">
        Étape {{ currentStep + 1 }} sur 5: {{ ETAPES_FORM_DOM[currentStep] }}
      </span>
    </div>

    <div class="fr-grid-row fr-grid-row--gutters">
      @for ( etape of ETAPES_FORM_DOM; track $index; let i = $index ) {
      <div
        class="step"
        role="button"
        tabindex="0"
        (click)="goToStep(i)"
        (keydown.enter)="goToStep(i)"
        (keydown.space)="goToStep(i)"
        [attr.aria-label]="'Aller à l\'étape ' + (i + 1)"
      >
        <div
          class="fr-flex fr-flex--column fr-flex--center fr-gap-2w stepper-step"
          [class.stepper-step--completed]="currentStep > i"
        >
          <div class="fr-flex fr-flex--center fr-flex--column">
            <img
              [src]="
                'assets/dsfr-pictograms/' + ETAPES_FORM_DOM_ICONES[i] + '.svg'
              "
              alt=""
              class="step-icon"
              aria-hidden="true"
            />

            <span class="fr-text--bold fr-text--center fr-text--sm fr-mb-0">
              {{ ETAPES_FORM_DOM[i] }}
            </span>

            @if (currentStep >= i) {
            <span
              class="fr-text--success fr-icon-success-fill"
              aria-hidden="true"
            ></span>
            }
          </div>
        </div>

        <div
          class="stepper-line"
          [class.stepper-line--completed]="currentStep >= i"
        ></div>
      </div>
      }
    </div>
  </nav>
  }
</div>
