<ng-template #appTourModal let-modal>
  <div class="modal-header">
    <h2 id="modal-title" class="modal-title">
      {{ tourSteps[currentStep].title }}
    </h2>
    <button
      class="btn-close"
      type="button"
      aria-label="Fermer"
      (click)="skipTour()"
    ></button>
  </div>

  <div class="modal-body" *ngIf="me">
    <p>
      Nous sommes ravis de vous accueillir sur la plateforme<br />
      D√©couvre vos premiers pas sur l'outile gr√¢ce √† cette courte pr√©sentation
    </p>

    <div class="tour-content">
      <ng-container *ngIf="currentStep === 1; else defaultImage">
        <img
          *ngIf="me?.role === 'admin'"
          src="/assets/images/modals/admin.png"
          alt="Interface DomiFa vue administrateur"
          aria-describedby="transcription-step-1"
          class="img-fluid"
        />
        <img
          *ngIf="me?.role === 'responsable' || me?.role === 'simple'"
          src="/assets/images/modals/responsable.png"
          alt="Interface DomiFa vue gestionnaire et instructeur"
          aria-describedby="transcription-step-1"
          class="img-fluid"
        />
        <img
          *ngIf="me?.role === 'facteur'"
          src="/assets/images/modals/facteur.png"
          alt="Interface DomiFa vue agent d'accueil et facteur"
          aria-describedby="transcription-step-1"
          class="img-fluid"
        />
      </ng-container>
      <ng-template #defaultImage>
        <img
          src="/assets/images/modals/popup.gif"
          alt="Interface de DomiFa"
          aria-describedby="transcription-step-0"
          class="img-fluid"
        />
      </ng-template>
    </div>

    <!-- Transcriptions accessibles (lecteurs d'√©cran uniquement) -->
    <span class="visually-hidden" aria-live="polite">
      <ng-container *ngIf="currentStep === 0">
        <span id="transcription-step-0">
          Une courte vid√©o montre l'interface de DomiFa destin√©e aux
          utilisateurs de structures. Dans le menu Mon compte, configurez les
          param√®tres de votre compte. Dans le bouton Domicili√©s, suivez la
          gestion quotidienne des domicili√©s. Dans le bouton Cr√©er une demande,
          cr√©ez un nouveau dossier domicili√©. Dans le menu central, suivez le
          statut de vos domicili√©s. Sur le moteur de recherche, retrouvez
          facilement un dossier domicili√©. Dans les sections interaction et
          courrier, ajoutez un passage, appel ou courrier. Modifiez une
          information dans un dossier en cliquant sur le nom et pr√©nom de la
          personne. Pour toute question, contactez l'√©quipe via le bouton
          d'acc√®s au centre d'aide, sur le symbole point d'interrogation.
        </span>
      </ng-container>

      <ng-container *ngIf="currentStep === 1">
        <span id="transcription-step-1">
          <ng-container *ngIf="me?.role === 'admin'">
            Dans la section Mon compte, configurez les param√®tres de votre
            compte. Dans le bouton Cr√©er une demande, cr√©ez une demande de
            domiciliation.
          </ng-container>
          <ng-container
            *ngIf="me?.role === 'responsable' || me?.role === 'simple'"
          >
            Depuis le bouton Cr√©er une demande, cr√©ez une demande de
            domiciliation. Modifiez une information dans un dossier en cliquant
            sur le nom et le pr√©nom du domicili√©.
          </ng-container>
          <ng-container *ngIf="me?.role === 'facteur'">
            Dans les sections Interactions et Courriers, ajoutez un passage, un
            appel ou un courrier.
          </ng-container>
        </span>
      </ng-container>
    </span>
    <ng-container *ngIf="currentStep === 0">
      <p>
        üí° Explorer l'ensemble des fonctionnalit√©s: documentation en ligne<br />
        üí¨ Une question ? Contactez l'√©quipe DomiFa via le formulaire de contact
      </p>
      <p>
        <b>Pr√™t √† passer √† l'action</b>
      </p>
      <p>üëâüèΩ D√©couvrir mes premi√®res actions dans la page suivante</p>
    </ng-container>
    <ng-container *ngIf="currentStep === 1">
      <ng-container>
        <p class="fw-bold mb-1">{{ currentRoleStep.subtitle }}</p>
        <p class="mb-2">{{ currentRoleStep.description }}</p>
        <ul class="list-unstyled mb-0">
          <li *ngFor="let action of currentRoleStep.actions">
            ‚úÖ {{ action }}
          </li>
        </ul>
      </ng-container>
    </ng-container>
  </div>

  <div class="modal-footer justify-content-between">
    <button
      *ngIf="currentStep === 1"
      type="button"
      class="btn btn-outline-dark"
      (click)="previousStep()"
    >
      Retour
    </button>

    <button
      *ngIf="currentStep === 0"
      type="button"
      class="btn btn-primary ms-auto"
      (click)="nextStep()"
    >
      Suivant
    </button>

    <button
      *ngIf="currentStep === 1"
      type="button"
      class="btn btn-primary"
      (click)="skipTour()"
    >
      Commencer √† utiliser DomiFa
    </button>
  </div>
</ng-template>
