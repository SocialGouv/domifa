<div class="modal-header bg-danger">
  <h4 class="text-white modal-title" id="modal-title">
    Fin de domiciliation - {{ usager | usagerNomComplet }}
  </h4>

  <button
    type="button"
    class="close"
    aria-describedby="modal-title"
    (click)="closeModals.emit()"
  >
    <span aria-hidden="true">&times;</span>
  </button>
</div>

<div class="modal-body py-4 text-left">
  <p>
    Vous souhaitez mettre fin à la domiciliation de
    <b>
      {{ usager | usagerNomComplet }} né{{
        usager.sexe === "homme" ? "" : "e"
      }}
      le {{ usager.dateNaissance | date: "dd/MM/yyyy" }}.
    </b>
    <br />
    <br />
    la radiation peut avoir de lourdes conséquences et laisser une personne sans
    adresse.
    <br />
    Elle doit être notifiée par écrit à l’intéressé et motivée, avec mention des
    voies et délais de recours.
    <br />
  </p>

  <p class="font-weight-bold">Merci d’indiquer le motif :</p>
  <form>
    <div
      class="form-row form-check"
      *ngFor="let motif of MOTIFS_RADIATION_LABELS | keyvalue"
    >
      <input
        class="form-check-input"
        type="radio"
        name="motif"
        id="{{ motif.key }}"
        [(ngModel)]="usager.decision.motif"
        value="{{ motif.key }}"
      />
      <label class="form-check-label" for="{{ motif.key }}">
        {{ motif.value }}
      </label>
    </div>
  </form>
  <div class="form-row">
    <div class="form-check">
      <input
        class="form-check-input"
        type="radio"
        name="motif"
        id="AUTRE"
        [(ngModel)]="usager.decision.motif"
        value="AUTRE"
      />
      <label class="form-check-label" for="AUTRE"> Autre motif </label>
    </div>
  </div>
  <div *ngIf="usager.decision.motif === 'AUTRE'" class="form-row">
    <label class="form-check-label" for="motifRadiationAutre">
      Motif de la radiation
      <span class="red">*</span>
    </label>
    <input
      type="text"
      class="form-control"
      id="motifRadiationAutre"
      [(ngModel)]="usager.decision.motifDetails"
    />
    <small id="radiationAutres" class="form-text text-muted">
      10 caractères minimum
    </small>
  </div>
</div>

<div class="modal-footer">
  <button class="btn btn-lg btn-outline-dark" (click)="closeModals.emit()">
    Revenir au profil
  </button>

  <button class="btn btn-lg btn-danger" (click)="setRadiation()">
    <span *ngIf="!loading">
      Radier le domicilié <fa-icon [icon]="['fas', 'angle-right']"></fa-icon>
    </span>

    <span *ngIf="loading"
      ><fa-icon [icon]="['fas', 'circle-notch']" [spin]="true"> </fa-icon>
      Veuillez patienter...</span
    >
  </button>
</div>
