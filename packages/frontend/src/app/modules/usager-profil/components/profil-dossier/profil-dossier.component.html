<app-profil-head [usager]="usager" [me]="me"> </app-profil-head>

<div class="content">
  <div class="container p-0">
    <div class="page-content py-2 px-5">
      <div class="row mb-5">
        <div class="col-md-12">
          <app-profil-etat-civil
            *ngIf="!editInfos"
            [usager]="usager"
          ></app-profil-etat-civil>

          <app-profil-etat-civil-form
            [usager]="usager"
            *ngIf="editInfos"
          ></app-profil-etat-civil-form>

          <div *ngIf="usager.isActif && !isRole('facteur')">
            <button
              class="btn btn-outline-dark"
              *ngIf="!editInfos"
              (click)="editInfos = true"
            >
              <fa-icon icon="pencil-alt" class="mr-2"></fa-icon>
              Modifier les informations
            </button>

            <button
              class="btn btn-outline-dark"
              *ngIf="editInfos"
              (click)="editInfos = false"
            >
              <fa-icon icon="pencil-alt" class="mr-2"></fa-icon>
              Annuler les modifications
            </button>
          </div>
        </div>
      </div>

      <div class="row mb-3">
        <div class="col-md-12">
          <h4>Entretien social</h4>
          <app-entretien
            *ngIf="editEntretien"
            [(editEntretien)]="editEntretien"
            [(usager)]="usager"
          ></app-entretien>

          <app-profil-entretien
            *ngIf="!editEntretien"
            [usager]="usager"
            [structure]="me.structure"
          >
          </app-profil-entretien>

          <div
            class="col-md-12 text-center"
            *ngIf="usager.isActif && !isRole('facteur')"
          >
            <br />
            <button
              class="btn btn-outline-dark"
              *ngIf="!editEntretien"
              (click)="openEntretien()"
            >
              <fa-icon icon="pencil-alt" class="mr-2"></fa-icon>
              Modifier la situation sociale
            </button>
          </div>
        </div>

        <div class="col-md-12">
          <app-documents [usager]="usager"></app-documents>

          <app-upload
            *ngIf="usager.isActif || usager.decision.statut === 'RADIE'"
            [usager]="usager"
          >
          </app-upload>
        </div>

        <br />
      </div>
    </div>
  </div>
</div>

<app-delete-usager-menu [usager]="usager"></app-delete-usager-menu>
