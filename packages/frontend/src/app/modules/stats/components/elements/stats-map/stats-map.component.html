<div class="carte" *ngIf="statsRegionsValues">
  <svg
    version="1.1"
    xmlns="http://www.w3.org/2000/svg"
    xmlns:xlink="http://www.w3.org/1999/xlink"
    viewBox="0 0 550 570"
    enable-background="new 0 0 550 570"
    xml:space="preserve"
  >
    <g class="regions">
      <ng-container *ngFor="let regionMap of STATS_REGIONS_FOR_MAP | keyvalue">
        <path
          [routerLink]="['/stats/region/' + regionsUrls[regionMap.key]]"
          [ngClass]="regionMap.key === selectedRegion ? 'region-hover' : ''"
          [attr.d]="regionMap.value.path"
          (mouseover)="selectRegion(regionMap.key)"
          *ngIf="STATS_REGIONS_DOM_TOM.indexOf(regionMap.key) === -1"
        />
      </ng-container>

      <ng-container *ngFor="let regionMap of STATS_REGIONS_FOR_MAP | keyvalue">
        <foreignObject
          *ngIf="
            STATS_REGIONS_DOM_TOM.indexOf(regionMap.key) === -1 &&
            selectedRegion === regionMap.key
          "
          [attr.x]="STATS_REGIONS_FOR_MAP[regionMap.key].x - 85"
          [attr.y]="STATS_REGIONS_FOR_MAP[regionMap.key].y - 54"
          height="80"
          width="220"
          @fadeInOut
          class="text-center"
        >
          <a [routerLink]="['/stats/region/' + regionsUrls[regionMap.key]]">
            <div class="map-tooltip">
              <div class="text-black">
                {{ regions[regionMap.key] }}
              </div>

              <a
                [routerLink]="['/stats/region/' + regionsUrls[regionMap.key]]"
                class="region-name font-weight-bold"
              >
                Voir le détail
              </a>
            </div>
          </a>
        </foreignObject>
        <foreignObject
          (mouseover)="selectRegion(regionMap.key)"
          *ngIf="STATS_REGIONS_DOM_TOM.indexOf(regionMap.key) === -1"
          [attr.x]="STATS_REGIONS_FOR_MAP[regionMap.key].x"
          [attr.y]="STATS_REGIONS_FOR_MAP[regionMap.key].y"
          width="50"
          height="50"
        >
          <a
            [routerLink]="['/stats/region/' + regionsUrls[regionMap.key]]"
            class="region-name font-weight-bold"
          >
            <div class="map-number">
              {{ statsRegionsValues[regionMap.key] }}
            </div>
          </a>
        </foreignObject>
      </ng-container>
    </g>
  </svg>
</div>

<div class="carte" *ngIf="statsRegionsValues">
  <g class="regions dom-tom">
    <svg
      version="1.1"
      xmlns="http://www.w3.org/2000/svg"
      xmlns:xlink="http://www.w3.org/1999/xlink"
      viewBox="0 0 545 163"
      enable-background="new 0 0 550 170"
      xml:space="preserve"
    >
      <ng-container *ngFor="let domTomDept of STATS_REGIONS_DOM_TOM">
        <path
          [ngClass]="domTomDept === selectedRegion ? 'region-hover' : ''"
          [attr.d]="STATS_REGIONS_FOR_MAP[domTomDept].path"
          (mouseover)="selectRegion(domTomDept)"
        />
      </ng-container>

      <ng-container *ngFor="let domTomDept of STATS_REGIONS_DOM_TOM">
        <foreignObject
          *ngIf="
            STATS_REGIONS_DOM_TOM.indexOf(domTomDept) !== -1 &&
            selectedRegion === domTomDept &&
            statsRegionsValues[domTomDept] !== 0
          "
          [attr.x]="STATS_REGIONS_FOR_MAP[domTomDept].x - 85"
          [attr.y]="STATS_REGIONS_FOR_MAP[domTomDept].y - 54"
          height="80"
          width="220"
          @fadeInOut
          class="text-center"
        >
          <a [routerLink]="['/stats/region/' + regionsUrls[domTomDept]]">
            <div class="map-tooltip">
              <div>
                {{ regions[domTomDept] }}
              </div>
              <a
                [routerLink]="['/stats/region/' + regionsUrls[domTomDept]]"
                class="region-name font-weight-bold"
              >
                Voir le détail
              </a>
            </div>
          </a>
        </foreignObject>
        <foreignObject
          @fadeInOut
          (mouseover)="selectRegion(domTomDept)"
          *ngIf="STATS_REGIONS_DOM_TOM.indexOf(domTomDept) !== -1"
          [attr.x]="STATS_REGIONS_FOR_MAP[domTomDept].x"
          [attr.y]="STATS_REGIONS_FOR_MAP[domTomDept].y"
          height="50"
          width="50"
        >
          <a
            [routerLink]="['/stats/region/' + regionsUrls[domTomDept]]"
            class="region-name font-weight-bold"
            @fadeInOut
          >
            <div class="map-number">{{ statsRegionsValues[domTomDept] }}</div>
          </a>
        </foreignObject>
      </ng-container>
    </svg>
  </g>
</div>
