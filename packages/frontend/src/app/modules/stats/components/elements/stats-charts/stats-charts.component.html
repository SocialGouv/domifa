<div class="stats-charts-container py-4" *ngIf="!publicStats">
  <div class="row d-flex align-items-center">
    <div class="col-md-12 text-center">
      <div @fadeInOut aria-live="polite">
        <fa-icon
          [icon]="['fas', 'spinner']"
          class="spinner"
          animation="spin"
          aria-hidden="true"
        ></fa-icon>
        <span>Chargement en cours, veuillez patienter</span>
      </div>
    </div>
  </div>
</div>
<div class="stats-charts-container py-4" *ngIf="publicStats">
  <div class="row d-flex align-items-center">
    <div class="col-md-3">
      <div class="text-center ps-md-4 pe-md-2 px-2">
        <div class="fw-bold mb-3">Depuis notre lancement</div>
        <button
          type="button"
          [ngClass]="selectedCharts === 'courriers' ? 'selected-stats' : ''"
          class="stats-section py-4 mb-1"
          (click)="selectChart('courriers')"
        >
          <img
            src="/assets/images/stats/courriers.svg"
            aria-hidden="true"
            alt="Courriers reçus depuis le lancement"
          />
          <div class="stats-section-counter text-primary">
            {{ publicStats.courrierOutCount | formatBigNumber }}
          </div>
          <div class="stats-section-label">courriers distribués</div>
        </button>

        <button
          type="button"
          [ngClass]="selectedCharts === 'usagers' ? 'selected-stats' : ''"
          class="stats-section py-4 mt-1"
          (click)="selectChart('usagers')"
        >
          <img
            src="/assets/images/stats/domicilies.svg"
            aria-hidden="true"
            alt="Domiciliés depuis le lancement"
          />
          <div class="stats-section-counter text-primary">
            {{ publicStats.usagersCount | formatBigNumber }}
          </div>
          <div class="stats-section-label">dossiers enregistrés</div>
        </button>
      </div>
    </div>
    <div class="col-md-9 ps-2 pe-4">
      <div class="text-center fw-bold mb-3">
        <span *ngIf="selectedCharts === 'courriers'">
          Courrier distribué chaque mois
        </span>
        <span *ngIf="selectedCharts === 'usagers'">
          Nouveaux domiciliés chaque mois
        </span>
      </div>

      <div class="stats-section" *ngIf="publicStats">
        <div id="charts">
          <ngx-charts-bar-vertical
            [scheme]="colorScheme"
            [results]="statsInCharts"
            [gradient]="gradient"
            [xAxis]="showXAxis"
            [yAxis]="showYAxis"
            [legend]="showLegend"
            [showXAxisLabel]="showXAxisLabel"
            [showYAxisLabel]="showYAxisLabel"
            [xAxisLabel]="xAxisLabel"
            [yAxisLabel]="yAxisLabel"
            [barPadding]="barPadding"
          >
          </ngx-charts-bar-vertical>
        </div>
      </div>
    </div>
  </div>
</div>
