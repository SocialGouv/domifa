<h3>Depuis notre lancement en 2019</h3>
<div class="stats-charts-container py-4" *ngIf="!publicStats">
  <div class="row d-flex align-items-center">
    <div class="col-md-12 text-center">
      <div @fadeInOut aria-live="polite">
        <fa-icon
          [icon]="['fas', 'spinner']"
          class="spinner"
          animation="spin"
          aria-hidden="true"
        ></fa-icon>
        <span>Chargement en cours, veuillez patienter</span>
      </div>
    </div>
  </div>
</div>
<div *ngIf="publicStats">
  <div class="row d-flex justify-content-center">
    <div class="col-12 col-md-10">
      <fieldset
        class="fr-fieldset row"
        id="storybook-form"
        aria-labelledby="storybook-form-legend "
      >
        <legend
          class="fr-fieldset__legend--regular fr-fieldset__legend visually-hidden"
          id="storybook-form-legend"
        >
          Légende pour l’ensemble des éléments
        </legend>
        <div
          class="fr-fieldset__element fr-fieldset__element--inline col-12 col-md-6"
        >
          <div class="fr-radio-group fr-radio-rich">
            <input
              type="radio"
              id="radio-courriers"
              name="stats-radio"
              value="courriers"
              [checked]="selectedCharts === 'courriers'"
              (change)="selectChart('courriers')"
            />
            <label class="fr-label" for="radio-courriers">
              <div class="fr-h3 mb-0 fr-text-title--blue-france">
                {{ publicStats.courrierOutCount | formatBigNumber }}
              </div>
              <div class="stats-section-label">courriers distribués</div>
            </label>
            <div class="fr-radio-rich__pictogram">
              <img
                class="fr-artwork fr-artwork--défaut"
                src="assets/dsfr-pictograms/digital/mail-send.svg"
                alt=""
              />
            </div>
          </div>
        </div>
        <div
          class="fr-fieldset__element fr-fieldset__element--inline col-12 col-md-6"
        >
          <div class="fr-radio-group fr-radio-rich">
            <input
              type="radio"
              id="radio-usagers"
              name="radios-stat"
              value="usagers"
              [checked]="selectedCharts === 'usagers'"
              (change)="selectChart('usagers')"
            />
            <label class="fr-label" for="radio-usagers">
              <div class="fr-h3 mb-0 fr-text-title--blue-france">
                {{ publicStats.usagersCount | formatBigNumber }}
              </div>
              <div class="stats-section-label">dossiers enregistrés</div>
            </label>
            <div class="fr-radio-rich__pictogram">
              <img
                class="fr-artwork fr-artwork--défaut"
                src="assets/dsfr-pictograms/document/binders.svg"
                alt=""
              />
            </div>
          </div>
        </div>
      </fieldset>
    </div>
  </div>
  <div class="row d-flex align-items-center">
    <div class="col-md-12 ps-2 pe-4">
      <div class="text-start fw-bold mb-1">
        <span *ngIf="selectedCharts === 'courriers'">
          Courriers distribués chaque mois
        </span>
        <span *ngIf="selectedCharts === 'usagers'">
          Nouveaux domiciliés chaque mois
        </span>
      </div>

      <div *ngIf="publicStats">
        <div id="charts">
          <ngx-charts-bar-vertical
            [scheme]="colorScheme"
            [results]="statsInCharts"
            [gradient]="gradient"
            [xAxis]="showXAxis"
            [yAxis]="showYAxis"
            [legend]="showLegend"
            [showXAxisLabel]="showXAxisLabel"
            [showYAxisLabel]="showYAxisLabel"
            [xAxisLabel]="xAxisLabel"
            [yAxisLabel]="yAxisLabel"
            [barPadding]="barPadding"
          >
          </ngx-charts-bar-vertical>
        </div>
      </div>
    </div>
  </div>
</div>
