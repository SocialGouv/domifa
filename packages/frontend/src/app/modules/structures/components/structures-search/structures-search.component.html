<div class="container my-4">
  <div class="row">
    <div class="col-6">
      <div class="step_form text-center">
        <div class="my-2">
          <span class="title"
            >Je suis domicilié dans un CCAS, un CIAS ou une association
          </span>
          <br />
          <br />
          <p>
            Cliquez sur le lien ci-dessous pour savoir si vous avez du courrier
            à récupérer
          </p>
          <br />
          <a
            [href]="portailUsagerUrl"
            rel="noopener noreferrer"
            class="btn btn-primary"
            >Me connecter à Mon DomiFa</a
          >
        </div>
      </div>
    </div>
    <div class="col-6">
      <div class="step_form text-center">
        <h1 class="title">
          Je suis un professionnel ou bénévole d’une structure
          <br />
          L’inscription se fait en moins d’une minute !
        </h1>

        <div class="row" *ngIf="!searchFailed && structures.length <= 0">
          <br />
          <form
            [formGroup]="codePostalForm"
            (ngSubmit)="submitCodePostal()"
            class="offset-md-2 col-md-8"
          >
            <div class="form-group">
              <label for="structure-search">
                Quel est le code postal de votre structure ?
              </label>

              <input
                type="text"
                class="form-control"
                id="structure-search"
                [ngClass]="{
                  'is-invalid': f.codePostal.dirty && f.codePostal.errors
                }"
                formControlName="codePostal"
                maxlength="5"
                placeholder="Code postal"
                required
              />
              <p *ngIf="f.codePostal.errors" class="invalid-feedback">
                <fa-icon
                  [icon]="['fas', 'exclamation-triangle']"
                  class="me-2"
                ></fa-icon>
                Code postal incorrect
              </p>
              <br />
              <button [disabled]="loading" class="btn btn-block btn-primary">
                <span *ngIf="loading">
                  <fa-icon [icon]="['fas', 'circle-notch']" [spin]="true">
                  </fa-icon>
                  Veuillez patienter...
                </span>
                <span *ngIf="!loading"
                  ><fa-icon
                    aria-hidden="true"
                    [icon]="['fas', 'search']"
                    class="me-2"
                  ></fa-icon>
                  Rechercher</span
                >
              </button>
            </div>
          </form>
        </div>

        <div
          class="text-center"
          *ngIf="searchFailed && structures.length === 0"
        >
          <br />
          <strong class="text-danger">
            Aucune structure n'est enregistrée dans votre ville.
          </strong>
          <br />
          Cliquez sur le lien ci-dessous pour inscrire votre structure.
          <br />
          <br />
          <a
            class="btn btn-primary"
            [routerLink]="['/structures/nouveau']"
            routerLinkActive="router-link-active"
          >
            J'inscris ma structure
            <fa-icon
              [icon]="['far', 'arrow-alt-circle-right']"
              class="me-2"
            ></fa-icon>
          </a>
        </div>
        <div class="text-center" *ngIf="structures.length > 0">
          <br />
          <strong>
            Si vous appartenez à l’une de ces structures, un membre de celle-ci
            doit vous donner accès :
          </strong>
          <div class="card" *ngFor="let structure of structures">
            <span>
              <strong class="text-primary">{{ structure.nom }}</strong>
              <br />
              {{ structure.adresse }},
              <i>{{ structure.codePostal }}, {{ structure.ville }}</i>
            </span>
          </div>
          <br />
          <p>
            Si votre structure n'est pas dans la liste,
            <br />
            vous pouvez la créer en cliquant sur le bouton ci-dessous
          </p>
          <a
            class="btn btn-primary"
            [routerLink]="['/structures/nouveau']"
            routerLinkActive="router-link-active"
          >
            J'inscris ma structure
          </a>
        </div>
      </div>
    </div>
  </div>
</div>
