<div *ngIf="me" class="head-page py-4">
  <div class="container">
    <div class="row">
      <div class="col-md-7 col-12">
        <h1 class="title">
          Paramètres d'accès au portail usager pour votre structure
        </h1>
      </div>
      <div class="text-start text-md-end col-12 col-md-5">
        <a
          title="Télécharger le guide du portail usager"
          href="/assets/files/guide_portail_usagers.pdf"
          target="_blank"
          class="btn btn-white-primary"
          rel="noopener noreferrer"
          download
        >
          <fa-icon aria-hidden="true" [icon]="['fas', 'info-circle']"></fa-icon>
          Télécharger le guide
        </a>
      </div>
    </div>
  </div>
</div>

<div class="content py-3">
  <div class="container py-3">
    <div class="page-content p-4">
      <p class="py-2">
        Une fois que la fonctionnalité d'accès au portail usager au sein de
        votre structure est activée, il vous faudra la valider sur chacune des
        fiches des domiciliés lorsqu'ils vous en ont fait la demande
      </p>

      <form>
        <div>
          <fieldset class="d-flex justify-content-center align-items-center">
            <legend class="required label me-2">
              Activer l'accès au portail usager pour vos domiciliés
            </legend>

            <div class="btn-group" role="group">
              <input
                type="radio"
                [(ngModel)]="structure.portailUsager.enabledByStructure"
                [value]="true"
                name="enabledByStructure"
                class="btn-check"
                id="enabledByStructure1"
              />
              <label
                [ngClass]="
                  structure.portailUsager.enabledByStructure === true
                    ? 'btn btn-primary'
                    : 'btn btn-outline-primary'
                "
                for="enabledByStructure1"
                >Oui</label
              >

              <input
                type="radio"
                [(ngModel)]="structure.portailUsager.enabledByStructure"
                [value]="false"
                name="enabledByStructure"
                class="btn-check"
                id="enabledByStructure2"
              />
              <label
                [ngClass]="
                  structure.portailUsager.enabledByStructure === false
                    ? 'btn btn-danger'
                    : 'btn btn-outline-danger'
                "
                for="enabledByStructure2"
                >Non</label
              >
            </div>
          </fieldset>

          <fieldset
            class="d-flex justify-content-center align-items-center"
            *ngIf="structure.portailUsager.enabledByStructure === true"
          >
            <legend class="label">
              Mettre à jour la date de dernier passage du domicilié s'il se
              connecte au portail usager
            </legend>
            <div class="btn-group" role="group">
              <input
                type="radio"
                class="btn-check"
                name="usagerLoginUpdateLastInteractionOui"
                id="usagerLoginUpdateLastInteractionOui"
                [(ngModel)]="
                  structure.portailUsager.usagerLoginUpdateLastInteraction
                "
                [value]="true"
              />
              <label
                [ngClass]="
                  structure.portailUsager.usagerLoginUpdateLastInteraction ===
                  true
                    ? 'btn btn-primary'
                    : 'btn btn-outline-primary'
                "
                for="usagerLoginUpdateLastInteractionOui"
              >
                Oui
              </label>

              <input
                class="btn-check"
                name="usagerLoginUpdateLastInteractionNon"
                type="radio"
                id="usagerLoginUpdateLastInteractionNon"
                [value]="false"
                [(ngModel)]="
                  structure.portailUsager.usagerLoginUpdateLastInteraction
                "
              />
              <label
                [ngClass]="
                  structure.portailUsager.usagerLoginUpdateLastInteraction ===
                  false
                    ? 'btn btn-danger'
                    : 'btn btn-outline-danger'
                "
                for="usagerLoginUpdateLastInteractionNon"
              >
                Non
              </label>
            </div>
          </fieldset>
        </div>
        <div class="col-md-12 my-2 text-center">
          <button
            class="btn btn-primary"
            type="submit"
            (click)="submitStructureSmsForm()"
            [disabled]="loading"
          >
            <span *ngIf="!loading"> Enregistrer les modifications </span>

            <span *ngIf="loading"
              ><fa-icon [icon]="['fas', 'circle-notch']" [spin]="true">
              </fa-icon>
              Veuillez patienter...</span
            >
          </button>
        </div>
      </form>
    </div>
  </div>
</div>
