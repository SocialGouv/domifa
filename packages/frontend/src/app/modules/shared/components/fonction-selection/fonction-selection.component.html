<div class="row">
  <div class="col-6 col-md-6">
    <ng-container>
      <div
        [class.fr-select-group--error]="
          fonctionFormControl &&
          (submitted || fonctionFormControl?.dirty) &&
          fonctionFormControl.errors
        "
        class="fr-select-group"
      >
        <label class="fr-label" for="fonction">{{ label }}</label>
        <select
          id="fonction"
          [(ngModel)]="fonction"
          (ngModelChange)="onModelChange(CONTROL_OPTIONS.FONCTION, $event)"
          name="fonction"
          class="fr-select"
          [attr.required]="required"
        >
          <option [ngValue]="null">Sélectionnez une option</option>
          <option
            *ngFor="
              let option of USER_FONCTION | keyvalue : compareOriginalOrder
            "
            [value]="option.key"
          >
            {{ USER_FONCTION_LABELS[option.key] }}
          </option>
        </select>
        <ul class="fr-messages-group ps-0">
          <li
            class="fr-message fr-message--info mt-0"
            *ngIf="
              !(
                (submitted || fonctionFormControl?.dirty) &&
                fonctionFormControl?.errors
              )
            "
            id="responsable-fonction-description"
          >
            Président.e, Directrice, etc.
          </li>
          <li
            id="responsable-fonction-errors"
            *ngIf="
              (submitted || fonctionFormControl?.dirty) &&
              fonctionFormControl?.errors
            "
            class="fr-message fr-message--error mt-0"
          >
            {{ invalidFeedbackText }}
          </li>
        </ul>
      </div>
    </ng-container>
  </div>
  <div class="col-6 col-md-6">
    <ng-container *ngIf="fonction === USER_FONCTION.AUTRE">
      <div
        [class.fr-input-group--error]="
          (fonctionDetailFormControl.dirty || submitted) &&
          fonctionDetailFormControl.errors
        "
        class="fr-input-group"
      >
        <label
          class="fr-label"
          for="fonctionDetail"
          [class.visually-hidden]="!displayLabel"
          >Préciser la fonction occupée par l’utilisateur</label
        >
        <input
          [(ngModel)]="fonctionDetail"
          (ngModelChange)="
            onModelChange(CONTROL_OPTIONS.DETAIL_FONCTION, $event)
          "
          type="text"
          class="fr-input"
          id="fonctionDetail"
          maxlength="200"
          name="fonctionDetail"
          [attr.aria-invalid]="
            (fonctionDetailFormControl.dirty || submitted) &&
            fonctionDetailFormControl.errors
              ? true
              : false
          "
          [attr.aria-describedby]="
            (fonctionDetailFormControl.dirty || submitted) &&
            fonctionDetailFormControl.errors
              ? 'fonction-error'
              : 'fonction-detail-description'
          "
          required
        />
        <ul
          class="fr-messages-group ps-0"
          id="responsable-detail-fonction-errors"
          *ngIf="
            (submitted || fonctionDetailFormControl?.dirty) &&
            fonctionDetailFormControl?.errors
          "
        >
          <li class="fr-message fr-message--error mt-0">
            Veuillez préciser la fonction
          </li>
        </ul>
      </div>
    </ng-container>
  </div>
</div>
