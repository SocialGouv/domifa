<ng-container>
  <div
    class="fr-form-group"
    [ngClass]="{
      'fr-form-group--error':
        parentFormGroup &&
        (submitted || parentFormGroup?.controls?.referrerId?.dirty) &&
        parentFormGroup?.controls?.referrerId.errors
    }"
  >
    <label class="fr-label" [class.fr-sr-only]="!displayLabel" for="referrerId">
      {{ label }}
    </label>
    <select
      id="referrerId"
      [(ngModel)]="referrerId"
      (ngModelChange)="onModelChange($event)"
      name="referrerId"
      class="fr-select"
      [attr.aria-invalid]="
        parentFormGroup &&
        (submitted || parentFormGroup?.controls?.referrerId?.dirty) &&
        parentFormGroup?.controls?.referrerId.errors
          ? true
          : false
      "
      [attr.required]="required"
    >
      <option [value]="null">Sans référent</option>
      <option *ngFor="let user of users" [value]="user.id">
        {{ user | fullName }}
      </option>
    </select>
    <p
      *ngIf="
        parentFormGroup &&
        (submitted || parentFormGroup?.controls?.referrerId?.dirty) &&
        parentFormGroup?.controls?.referrerId.errors
      "
      class="fr-error-text"
    >
      Le référent est obligatoire
    </p>
  </div>
</ng-container>
