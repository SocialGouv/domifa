<div class="row" *ngIf="parentFormGroup">
  <div class="col form-group required">
    <label for="password">Mot de passe</label>
    <div class="input-group">
      <input
        type="password"
        (ngModelChange)="setPassword($event)"
        [(ngModel)]="password"
        name="password"
        [type]="!hidePassword ? 'text' : 'password'"
        class="form-control"
        id="password"
        [ngClass]="{
          'is-invalid':
            (submitted || parentFormGroup.controls.password.dirty) &&
            parentFormGroup.controls.password.errors,
          'is-valid':
            parentFormGroup.controls.password.dirty &&
            !parentFormGroup.controls.password.errors
        }"
        placeholder="Mot de passe"
        autocomplete="new-password"
        required
      />

      <button type="button" class="input-group-text" (click)="togglePassword()">
        <fa-icon
          title="Voir / cacher le mot de passe"
          [icon]="hidePassword ? ['far', 'eye'] : ['far', 'eye-slash']"
        ></fa-icon>
      </button>
    </div>

    <div class="row indications">
      <p
        class="my-1"
        [ngClass]="
          parentFormGroup.controls.password.hasError('required') ||
          parentFormGroup.controls.password.hasError('hasNumber')
            ? 'text-danger'
            : 'text-success'
        "
      >
        <fa-icon
          [icon]="[
            'fas',
            parentFormGroup.controls.password.hasError('required') ||
            parentFormGroup.controls.password.hasError('hasNumber')
              ? 'times-circle'
              : 'check-circle'
          ]"
        ></fa-icon>
        Au moins 1 chiffre
      </p>
      <p
        class="my-1"
        [ngClass]="
          parentFormGroup.controls.password.hasError('required') ||
          parentFormGroup.controls.password.hasError('hasCapitalCase')
            ? 'text-danger'
            : 'text-success'
        "
      >
        <fa-icon
          [icon]="[
            'fas',
            parentFormGroup.controls.password.hasError('required') ||
            parentFormGroup.controls.password.hasError('hasCapitalCase')
              ? 'times-circle'
              : 'check-circle'
          ]"
        ></fa-icon>
        Au moins une lettre en majuscule
      </p>
      <p
        class="my-1"
        [ngClass]="
          parentFormGroup.controls.password.hasError('required') ||
          parentFormGroup.controls.password.hasError('hasLowerCase')
            ? 'text-danger'
            : 'text-success'
        "
      >
        <fa-icon
          [icon]="[
            'fas',
            parentFormGroup.controls.password.hasError('required') ||
            parentFormGroup.controls.password.hasError('hasLowerCase')
              ? 'times-circle'
              : 'check-circle'
          ]"
        ></fa-icon>
        Au moins une lettre en minuscule
      </p>
      <p
        class="my-1"
        [ngClass]="
          parentFormGroup.controls.password.hasError('required') ||
          parentFormGroup.controls.password.hasError('minlength') ||
          parentFormGroup.controls.password.hasError('maxlength')
            ? 'text-danger'
            : 'text-success'
        "
      >
        <fa-icon
          [icon]="[
            'fas',
            parentFormGroup.controls.password.hasError('required') ||
            parentFormGroup.controls.password.hasError('minlength') ||
            parentFormGroup.controls.password.hasError('maxlength')
              ? 'times-circle'
              : 'check-circle'
          ]"
        ></fa-icon>
        Doit contenir entre 12 et 150 caractères
      </p>
    </div>
  </div>
  <div class="col form-group required">
    <label for="passwordConfirmationInput">Confirmer votre mot de passe</label>
    <div class="input-group">
      <input
        class="form-control"
        [type]="!hidePasswordConfirmation ? 'text' : 'password'"
        [ngClass]="{
          'is-invalid':
            (parentFormGroup.controls.passwordConfirmation.dirty ||
              submitted) &&
            (parentFormGroup.controls.passwordConfirmation.errors ||
              parentFormGroup?.errors?.noPassswordMatch),
          'is-valid':
            parentFormGroup.controls.passwordConfirmation.dirty &&
            !parentFormGroup.controls.passwordConfirmation.errors &&
            !parentFormGroup?.errors?.noPassswordMatch
        }"
        id="passwordConfirmationInput"
        autocomplete="new-password"
        (ngModelChange)="setPasswordConfirm($event)"
        [(ngModel)]="passwordConfirmation"
        name="passwordConfirmation"
        required
      />

      <button
        type="button"
        class="input-group-text"
        (click)="togglePasswordConfirmation()"
      >
        <fa-icon
          title="Voir / cacher le mot de passe"
          [icon]="
            hidePasswordConfirmation ? ['far', 'eye'] : ['far', 'eye-slash']
          "
        ></fa-icon>
      </button>
    </div>

    <div class="row indications">
      <div
        class="text-danger col-md-12"
        *ngIf="
          passwordConfirmation &&
          parentFormGroup.controls.passwordConfirmation.hasError('required')
        "
      >
        La confirmation du mot de passe est obligatoire
      </div>

      <div
        [ngClass]="
          passwordConfirmation && !parentFormGroup?.errors?.noPassswordMatch
            ? 'text-success'
            : 'text-danger'
        "
      >
        <fa-icon
          [icon]="[
            'fas',
            passwordConfirmation && !parentFormGroup?.errors?.noPassswordMatch
              ? 'check-circle'
              : 'times-circle'
          ]"
        ></fa-icon>
        Les mots de passe doivent être identiques
      </div>
    </div>
  </div>
</div>
