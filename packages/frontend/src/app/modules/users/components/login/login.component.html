<div class="step_form my-5">
  <div class="text-center">
    <h1 class="title">Connexion à Domifa</h1>
  </div>
  <form
    [formGroup]="loginForm"
    class="col-md-8 offset-md-2"
    (ngSubmit)="login()"
  >
    <div class="col form-group required">
      <label for="email">Adresse email</label>
      <input
        type="email"
        id="email"
        formControlName="email"
        autocomplete="username"
        class="form-control"
        [ngClass]="{ 'is-invalid': f.email.dirty && f.email.errors }"
      />
      <div *ngIf="f.email.dirty && f.email.errors" class="invalid-feedback">
        Veuillez vérifier l'adresse email
      </div>
    </div>
    <div class="col form-group required">
      <label for="password">Mot de passe</label>
      <div class="input-group">
        <input
          type="password"
          id="password"
          formControlName="password"
          [type]="!hidePassword ? 'text' : 'password'"
          class="form-control"
          placeholder="Mot de passe"
          autocomplete="current-password"
          [ngClass]="{ 'is-invalid': f.password.dirty && f.password.errors }"
        />
        <div class="input-group-append">
          <span
            [attr.aria-label]="
              (hidePassword ? 'Afficher' : 'Masquer') +
              'ou masquer le mot de passe'
            "
            [attr.aria-checked]="!hidePassword"
            class="input-group-text"
            role="switch"
            (click)="togglePassword()"
          >
            <fa-icon
              [icon]="hidePassword ? ['far', 'eye'] : ['far', 'eye-slash']"
            ></fa-icon>
          </span>
        </div>
      </div>
      <div
        *ngIf="f.password.dirty && f.password.errors"
        class="invalid-feedback"
      >
        <div *ngIf="f.password.errors.required">
          Le mot de passe est obligatoire
        </div>
      </div>
    </div>
    <div class="form-group text-center">
      <button
        [disabled]="loading || loginForm.invalid"
        aria-label="Connexion"
        class="btn btn-primary"
      >
        <span *ngIf="!loading"> Connexion </span>

        <span *ngIf="loading"
          ><fa-icon [icon]="['fas', 'circle-notch']" [spin]="true"> </fa-icon>
          Connexion en cours...</span
        >
      </button>
    </div>

    <div class="text-center">
      <a routerLink="/reset-password" class="btn btn-link">
        Mot de passe oublié
      </a>
    </div>
  </form>
</div>


<ng-template #dangerTpl>
  <svg xmlns="http://www.w3.org/2000/svg" fill="#fff" width="24" height="24" viewBox="0 0 24 24"><path d="M10.872 6.831l1.695 3.904 3.654-1.561-1.79 3.426 3.333.954-3.417 1.338 2.231 4.196-4.773-2.582-2.869 2.287.413-3.004-3.792-.726 2.93-1.74-1.885-2.512 3.427.646.843-4.626zm-.786-6.831l-1.665 9.119-6.512-1.228 3.639 4.851-5.548 3.294 7.108 1.361-.834 6.076 5.742-4.577 9.438 5.104-4.288-8.064 6.834-2.677-6.661-1.907 3.25-6.22-6.98 2.982-3.523-8.114z"/></svg>
  Danger Danger !
</ng-template><button class="btn btn-danger" (click)="showDanger(dangerTpl)" ngbTooltip="Will disappear in 15s">Danger toast</button>&nbsp;
