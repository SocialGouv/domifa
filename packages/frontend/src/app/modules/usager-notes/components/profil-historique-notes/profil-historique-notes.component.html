<table *ngIf="usager?.notes.length > 0" class="table table-hover">
  <caption class="visually-hidden">
    Notes sur l'usager
  </caption>
  <thead>
    <tr>
      <th scope="col">Date</th>
      <th scope="col">Message</th>
      <th scope="col">Responsable</th>
      <th scope="col">Actions</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let note of usager.notes">
      <td>
        {{ note.createdAt | date : "dd/MM/yyyy à HH:mm" }}
      </td>
      <td>
        {{ note.message }}
        <ng-container *ngIf="note.archivedAt">
          <br />
          <b
            >Archivée le {{ note.archivedAt | date : "dd/MM/yyyy à HH:mm" }} par
            {{ note.archivedBy.userName }}</b
          ></ng-container
        >
      </td>
      <td>{{ note.createdBy.userName }}</td>
      <td>
        <div class="d-inline-block" ngbDropdown #myDrop="ngbDropdown">
          <button
            type="button"
            class="btn btn-outline-primary me-2"
            id="dropdownManual"
            ngbDropdownToggle
          >
            Actions
            <span class="visually-hidden">
              Supprimer, archiver ou épingler la note du
              {{ note.createdAt | date : "dd/MM/yyyy à HH:mm" }}
            </span>
          </button>
          <div ngbDropdownMenu aria-labelledby="dropdownManual">
            <button type="button" (click)="pinNote(note)" ngbDropdownItem>
              <fa-icon
                aria-hidden="true"
                [icon]="['fas', 'thumbtack']"
              ></fa-icon>
              Épingler la note
            </button>
            <button
              type="button"
              (click)="noteToDeleteUuid = note.uuid"
              ngbDropdownItem
            >
              <fa-icon aria-hidden="true" [icon]="['fas', 'trash']"></fa-icon>
              Supprimer la note
            </button>

            <button
              type="button"
              (click)="noteToArchiveUuid = note.uuid"
              ngbDropdownItem
            >
              <fa-icon
                aria-hidden="true"
                [icon]="['fas', 'folder-open']"
              ></fa-icon>
              Archiver la note
            </button>
          </div>
        </div>
      </td>
    </tr>
  </tbody>
</table>
<div *ngIf="usager?.notes.length === 0" class="alert alert-info">
  Aucune note enregistrée actuellement
</div>
