<h3>Historique des notes</h3>

<div class="table-responsive">
  <table *ngIf="notes.length > 0" class="table table-hover">
    <caption class="visually-hidden">
      Notes sur l'usager
    </caption>
    <thead>
      <tr>
        <th scope="col">Date</th>
        <th scope="col">Message</th>
        <th scope="col">Responsable</th>
        <th scope="col">Statut</th>
        <th scope="col" class="text-end">Actions</th>
      </tr>
    </thead>
    <tbody>
      <tr
        *ngFor="let note of notes; let i = index"
        [attr.aria-rowindex]="i + 1"
      >
        <td>
          {{ note.createdAt | date : "dd MMMM yyyy à HH:mm" }}
        </td>
        <td>
          <p class="fw-bold text-break">{{ note.message }}</p>
        </td>
        <td>{{ note.createdBy.userName }}</td>
        <td>
          <span
            *ngIf="note.archivedAt"
            class="badge badge-pill bg-warning text-dark"
          >
            Note archivée
          </span>
          <span class="badge badge-pill bg-primary" *ngIf="note.pinned">
            Note épinglée
          </span>
        </td>
        <td class="text-end">
          <div *ngIf="me?.role !== 'facteur'" class="ms-3">
            <app-usager-notes-actions
              [usager]="usager"
              [note]="note"
              (getUsagerNotes)="getUsagerNotes()"
            ></app-usager-notes-actions>
          </div>
        </td>
      </tr>
    </tbody>
  </table>
</div>
<div *ngIf="notes.length === 0" class="alert alert-info">
  <p>Aucune note enregistrée actuellement</p>
</div>
