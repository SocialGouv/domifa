<ng-container *ngIf="usager">
  <!-- Message d'absence de notes -->
  <div class="fr-callout fr-callout--info" *ngIf="!notes.length">
    <h3 class="fr-callout__title">Aucune note enregistrée</h3>
    <p class="fr-callout__text">Aucune note n'a été ajoutée pour le moment.</p>
  </div>

  <div *ngIf="notes.length" class="notes-list">
    <div *ngFor="let note of notes | slice : 0 : 5; let i = index">
      <div class="fr-grid-row fr-grid-row--gutters">
        <div class="fr-col-md-10">
          <div class="fr-mb-2w">
            <div class="fr-flex fr-flex--row fr-gap-1w">
              <i class="fr-icon-chat-3-line" aria-hidden="true"></i>
              <p class="fr-text--bold fr-text--primary fr-mb-0">
                {{ note.createdAt | date : "dd MMMM yyyy 'à' HH:mm" }} -
                {{ note.createdBy.userName }}
              </p>
            </div>
            <span
              class="fr-badge fr-badge--blue-cumulus fr-mt-1w"
              *ngIf="note.pinned"
            >
              <i class="fr-icon-pushpin-2-fill" aria-hidden="true"></i>
              Note épinglée
            </span>
          </div>

          <!-- Contenu du message -->
          <p class="fr-mb-3w">{{ note.message }}</p>
        </div>

        <!-- Actions (20%) -->
        <div class="fr-col-md-2 fr-flex fr-flex--justify-end">
          <app-usager-notes-actions
            *ngIf="me?.role !== 'facteur' && me?.role !== 'agent'"
            [usager]="usager"
            [note]="note"
            (getUsagerNotes)="getUsagerNotes()"
          ></app-usager-notes-actions>
        </div>
      </div>

      <!-- Séparateur -->
      <hr class="fr-separator" *ngIf="i < notes.length - 1" />
    </div>
  </div>
</ng-container>

<!-- Formulaire d'ajout -->
<app-profil-add-note-form
  [usager]="usager"
  (cancel)="closeModals()"
  (getUsagerNotes)="getUsagerNotes()"
></app-profil-add-note-form>
