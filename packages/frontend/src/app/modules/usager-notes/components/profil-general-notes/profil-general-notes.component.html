@if (usager) { @let displayedNotes = (notes | slice : 0 : 5); @if
(!notes.length) {
<div class="fr-callout fr-callout--info">
  <p class="fr-callout__text">Aucune note enregistrée</p>
</div>
} @if (notes.length) {

<div class="notes-list">
  <ng-container *ngFor="let note of displayedNotes; let last = last">
    <div class="fr-grid-row fr-grid-row--gutters fr-grid-row--top">
      <div class="fr-col-12 fr-col-md-10">
        <i class="fr-icon-message-2-line fr-icon--sm" aria-hidden="true"></i>

        <span class="fr-text--bold fr-text-title--blue-france">
          {{ note.createdAt | date : "dd MMMM yyyy 'à' HH:mm" }} -
          {{ note.createdBy.userName }}
        </span>

        @if (note.pinned) {
        <span class="fr-badge fr-badge--blue-cumulus fr-mt-1w">
          <i class="fr-icon-pushpin-2-fill fr-icon--sm" aria-hidden="true"></i>
          Note épinglée
        </span>
        }

        <p class="fr-mb-3w">{{ note.message }}</p>
      </div>

      <div
        class="fr-col-12 fr-col-md-2 fr-flex fr-flex--justify-end fr-flex--align-items-start"
      >
        @if (me?.role !== 'facteur' && me?.role !== 'agent') {
        <app-usager-notes-actions
          [usager]="usager"
          [note]="note"
          (getUsagerNotes)="getUsagerNotes()"
        ></app-usager-notes-actions>
        }
      </div>
    </div>

    @if (!last) {
    <hr class="fr-separator" />
    }
  </ng-container>
</div>
} }

<app-profil-add-note-form
  [usager]="usager"
  (cancel)="closeModals()"
  (getUsagerNotes)="getUsagerNotes()"
></app-profil-add-note-form>
