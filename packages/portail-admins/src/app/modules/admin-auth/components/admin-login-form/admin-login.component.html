<h1 class="align-self-start fr-h3">DomiFa - Accès Institutionnel</h1>
<span class="col-12 col-md-12 fr-text-default--error">
  * champs obligatoires
</span>
<form
  [formGroup]="loginForm"
  class="column d-flex flex-column gap-3 pt-4 pt-md-5 pb-4 pb-md-5"
  (ngSubmit)="login()"
>
  <div>
    <div
      [class.fr-input-group--error]="f.email.dirty && f.email.errors"
      class="col fr-input-group required"
    >
      <label class="fr-label" for="email">Email</label>
      <input
        type="email"
        formControlName="email"
        id="email"
        name="email"
        [attr.aria-invalid]="f.email.dirty && f.email.errors"
        placeholder="Votre email"
        class="fr-input"
      />
      <ul
        *ngIf="f.email.dirty && f.email.errors"
        class="ms-0 ps-0 fr-messages-group"
      >
        <li class="fr-message fr-message--error">Veuillez vérifier l'email</li>
      </ul>
    </div>
  </div>
  <div
    [class.fr-input-group--error]="f.password.dirty && f.password.errors"
    class="fr-input-group required"
  >
    <div class="fr-password" id="passwordContainer">
      <label class="fr-password__label fr-label" for="password">
        Mot de passe
      </label>
      <div class="fr-input-wrap">
        <input
          formControlName="password"
          id="password"
          name="password"
          [type]="!hidePassword ? 'text' : 'password'"
          class="fr-input"
          [attr.aria-invalid]="f.password.dirty && f.password.errors"
          placeholder="Mot de passe"
          autocomplete="current-password"
        />
        <ul
          *ngIf="f.password.dirty && f.password.errors"
          class="ms-0 ps-0 fr-messages-group"
        >
          <li class="fr-message fr-message--error">
            Veuillez vérifier le mot de passe
          </li>
        </ul>
      </div>
      <div
        class="fr-password__checkbox fr-checkbox-group fr-checkbox-group--sm"
      >
        <input
          id="show-password"
          type="checkbox"
          class="fr-checkbox"
          [attr.aria-checked]="!hidePassword"
          (change)="toggleShowPassword()"
        />
        <label class="fr--password__checkbox fr-label" for="show-password">
          Afficher
        </label>
      </div>
    </div>
  </div>
  <div>
    <a routerLink="/auth/reset-password" class="fr-link">
      Mot de passe oublié ?
    </a>
  </div>
  <div class="form-group my-2 text-center">
    <button id="loginBtn" type="submit" class="fr-btn d-flex flex-column w-100">
      <span *ngIf="!loading">Se connecter </span>
      <span *ngIf="loading"
        ><fa-icon
          aria-hidden="true"
          [icon]="['fas', 'circle-notch']"
          animation="spin"
        >
        </fa-icon>
        Connexion en cours...</span
      >
    </button>
  </div>
</form>
