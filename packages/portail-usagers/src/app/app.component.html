<dsfr-ext-toaster position="top-left"></dsfr-ext-toaster>
<app-idle-manager></app-idle-manager>
<dsfr-skiplinks [links]="skipLinks"></dsfr-skiplinks>
<header id="page-header" role="banner">
  <div
    *ngIf="!matomoInfo"
    class="fr-notice fr-notice--info"
    role="dialog"
    aria-modal="true"
  >
    <div class="fr-container">
      <div class="fr-notice__body">
        <p>
          <span class="fr-notice__title"
            >Avertissement sur la collecte de données</span
          >
          <span class="fr-notice__desc"
            >Nous collectons des données anonymisées à des fins statistiques via
            l'outil français Matomo. Pour tout savoir sur notre utilisation des
            données, consultez notre</span
          >
          <a
            class="fr-notice__link"
            [routerLink]="['/confidentialite']"
            ariaCurrentWhenActive="page"
            routerLinkActive="router-link-active"
            >politique de confidentialité.
          </a>
        </p>
        <button
          (click)="closeMatomo()"
          type="button"
          class="fr-btn--close fr-btn"
        >
          Masquer le message
        </button>
      </div>
    </div>
  </div>
  <dsfr-header
    [logoLabel]="'République<br/>Française'"
    operatorImageAlt="'Retour à l'accueil de Mon DomiFa'"
    [operatorImagePath]="'/assets/images/logo-dsfr.svg'"
    [logoLink]="{ routerLink: '/' }"
  >
    <ng-template #headerTools>
      <dsfr-button
        *ngIf="usagerProfile"
        buttonSize="SM"
        icon="fr-icon-logout-box-r-line"
        label="Se déconnecter"
        (click)="logout()"
      ></dsfr-button>
    </ng-template>
    <ng-template #headerToolsMobile>
      <dsfr-button
        *ngIf="usagerProfile"
        buttonSize="SM"
        icon="fr-icon-logout-box-r-line"
        label="Se déconnecter"
        (click)="logout()"
      ></dsfr-button>
    </ng-template>
  </dsfr-header>
</header>
<main role="main" id="page">
  <router-outlet></router-outlet>
</main>
<dsfr-footer
  [logo]="{
    label: 'République<br>Française',
    imageAlt: 'République française logo',
    tooltipMessage: '',
    navigation: { routerLink: '/' }
  }"
  [display]="true"
  [mandatoryLinks]="[
    {
      label: 'Accessibilité : partiellement conforme',
      link: 'https://domifa.fabrique.social.gouv.fr/accessibilite',
    },
    {
      label: 'Mentions légales',
      link: '/mentions-legales',
    },
    {
      label: 'Conditions générales d’utilisation',
      link: '/cgu',
    },
    {
      label: 'Politique de confidentialité',
      link: '/confidentialite',
    },
    {
      label: 'Plan du site',
      link: '/plan-site',
    },
    {
      label: 'FAQ',
      link: '/faq',
    },
    {
      label: 'Contact',
      
      link: 'https://tally.so/r/wz8Na8'
    },
    {
      label: 'Nouveautés',
      link: '/news',
    }
  ]"
  license="Sauf mention explicite de propriété intellectuelle détenue par des tiers, les contenus de ce site sont proposés sous <a href='https://github.com/etalab/licence-ouverte/blob/master/LO.md' _target='_blank'>licence etalab-2.0</a>"
></dsfr-footer>

<dsfr-modal
  size="LG"
  icon="fr-icon-newspaper-line"
  #newsModal
  dialogId="newsModal"
  titleModal="Des nouveautés sont disponibles sur Mon DomiFa"
>
  <app-news-content [isModal]="true" [news]="news"></app-news-content>
  <ng-template
    (conceal)="hideNews()"
    class="justify-self-right"
    #modalFooterTemplate
  >
    <dsfr-buttons-group inline="LG" alignment="reverse" groupMarkup="div">
      <dsfr-button
        (click)="hideNews()"
        label="Continuer sur Mon Domifa"
      ></dsfr-button>
    </dsfr-buttons-group>
  </ng-template>
</dsfr-modal>
