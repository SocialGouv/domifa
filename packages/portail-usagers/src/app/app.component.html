<app-idle-manager></app-idle-manager>
<dsfr-skiplinks [links]="skipLinks"></dsfr-skiplinks>
<header id="page-header" role="banner">
  <div
    *ngIf="!matomoInfo"
    class="fr-notice fr-notice--info"
    role="dialog"
    aria-modal="true"
  >
    <div class="fr-container">
      <div class="fr-notice__body">
        <p>
          <span class="fr-notice__title"
            >Avertissement sur la collecte de données</span
          >
          <span class="fr-notice__desc"
            >Nous collectons des données anonymisées à des fins statistiques via
            l'outil français Matomo. Pour tout savoir sur notre utilisation des
            données, consultez notre</span
          >
          <a
            class="fr-notice__link"
            [routerLink]="['/confidentialite']"
            ariaCurrentWhenActive="page"
            routerLinkActive="router-link-active"
            >politique de confidentialité.
          </a>
        </p>
        <button
          (click)="closeMatomo()"
          type="button"
          class="fr-btn--close fr-btn"
        >
          Masquer le message
        </button>
      </div>
    </div>
  </div>
  <div class="fr-header">
    <div class="fr-header__body">
      <div class="fr-container">
        <div class="fr-header__body-row">
          <div class="fr-header__brand fr-enlarge-link">
            <div class="fr-header__brand-top">
              <div class="fr-header__logo">
                <p class="fr-logo">République <br />Française</p>
                <span class="fr-sr-only"> Liberté, Égalité, Fraternité </span>
              </div>
              <div class="fr-header__operator">
                <a
                  ariaCurrentWhenActive="page"
                  routerLink="/"
                  title="Retour à l'accueil"
                >
                  <img
                    class="fr-responsive-img"
                    style="max-width: 9.0625rem"
                    src="assets/images/logo-dsfr.svg"
                    alt="''"
                  />
                </a>
              </div>

              <div *ngIf="usagerProfile" class="fr-header__navbar">
                <button
                  data-fr-opened="false"
                  aria-controls="menu-modal-23"
                  title="Menu"
                  type="button"
                  id="menu-header"
                  class="fr-btn--menu fr-btn"
                >
                  Menu
                </button>
              </div>
            </div>
          </div>
          <div
            id="menu-modal-23"
            *ngIf="usagerProfile"
            class="fr-header__tools"
          >
            <div class="fr-header__tools-links">
              <ul class="fr-btns-group">
                <li>
                  <a
                    [tabIndex]="0"
                    (click)="logout()"
                    routerLink="/"
                    class="fr-icon-logout-box-r-line fr-btn"
                    >Se déconnecter</a
                  >
                </li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div
      class="fr-header__menu fr-modal"
      id="menu-modal-23"
      aria-labelledby="menu-header"
    >
      <div class="fr-container">
        <button
          aria-controls="menu-modal-23"
          title="Fermer"
          type="button"
          id="button-45"
          class="fr-btn--close fr-btn"
        >
          Fermer
        </button>
        <div class="fr-header__menu-links"></div>
      </div>
    </div>
  </div>
</header>

<main role="main" id="page">
  <router-outlet></router-outlet>
</main>
<dsfr-footer
  [logo]="{
    label: 'République<br>Française',
    imageAlt: '',
    navigation: { route: '/' }
  }"
  [display]="true"
  [mandatoryLinks]="[
    {
      label: 'Accessibilité : partiellement conforme',
      link: 'https://domifa.fabrique.social.gouv.fr/accessibilite',
    },
    {
      label: 'Mentions légales',
      link: '/mentions-legales',
    },
    {
      label: 'Conditions générales d’utilisation',
      link: '/cgu',
    },
    {
      label: 'Politique de confidentialité',
      link: '/confidentialite',
    },
    {
      label: 'Plan du site',
      link: '/plan-site',
    },
    {
      label: 'FAQ',
      link: '/faq',
    },
    {
      label: 'Contact',
      link: 'https://tally.so/r/wz8Na8'
    },
    {
      label: 'Nouveautés',
      link: '/news',
    }
  ]"
  license="Sauf mention explicite de propriété intellectuelle détenue par des tiers, les contenus de ce site sont proposés sous <a href='https://github.com/etalab/licence-ouverte/blob/master/LO.md' _target='_blank'>licence etalab-2.0</a>"
></dsfr-footer>

<dsfr-modal
  size="LG"
  icon="fr-icon-newspaper-line"
  #newsModal
  dialogId="newsModal"
  titleModal="Des nouveautés sont disponibles sur Mon DomiFa"
>
  <app-news-content [isModal]="true" [news]="news"></app-news-content>
  <ng-template
    (conceal)="hideNews()"
    class="justify-self-right"
    #modalFooterTemplate
  >
    <dsfr-buttons-group inline="LG" alignment="reverse" groupMarkup="div">
      <dsfr-button
        (click)="hideNews()"
        label="Continuer sur Mon Domifa"
      ></dsfr-button>
    </dsfr-buttons-group>
  </ng-template>
</dsfr-modal>
<dsfr-ext-toaster position="top-left"></dsfr-ext-toaster>
