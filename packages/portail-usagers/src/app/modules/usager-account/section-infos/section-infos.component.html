<ng-container *ngIf="usager" class="my-2">
  <h2 class="content section-title">Votre domiciliation</h2>

  <div class="content section-content">
    <div class="col-md-12">
      <div
        class="alert alert-danger"
        *ngIf="usager.decision.statut === 'RADIE'"
      >
        <div class="svg-icon icon-danger"></div>

        <div>
          Cette personne a été radiée le
          {{ usager.decision.dateFin | date: "dd/MM/yyyy" }}
          : {{ usager.decision.motifString }}
        </div>
      </div>
      <div
        class="alert alert-danger"
        *ngIf="usager.decision.statut === 'REFUS'"
      >
        <div class="svg-icon icon-danger"></div>
        <div class="text-danger">
          Demande refusée le
          {{ usager.decision.dateFin | date: "dd/MM/yyyy" }}
          : {{ usager.decision.motifString }}
        </div>
      </div>

      <div
        class="alert"
        [ngClass]="usager.rdvInfos.class ? 'alert-danger' : 'alert-warning'"
        *ngIf="
          usager.decision.statut === 'INSTRUCTION' &&
          usager.typeDom === 'RENOUVELLEMENT'
        "
      >
        <div class="svg-icon icon-calendar"></div>
        <span [class]="usager.rdvInfos.class">
          Demande de renouvellement actuellement en cours
          {{ usager.rdvInfos.display ? ": " + usager.rdvInfos.content : "" }}

          <a [routerLink]="['/usager/' + usager.ref + '/edit']" class="ml-2">
            Compléter la demande
          </a>
        </span>
      </div>

      <div
        class="alert alert-info"
        *ngIf="
          usager.decision.statut === 'ATTENTE_DECISION' &&
          usager.typeDom === 'RENOUVELLEMENT'
        "
      >
        <div class="svg-icon icon-calendar"></div>
        <div>
          Cette demande de renouvellement est actuellement en attente d'une
          décision
        </div>
        <div>
          <a
            [routerLink]="['/usager/' + usager.ref + '/edit']"
            class="btn btn-light"
          >
            <fa-icon [icon]="['fas', 'redo']" class="mr-2"></fa-icon>
            Voir le récapitulatif
          </a>
        </div>
      </div>
    </div>
  </div>
  <div class="content section-content" id="usager-dossier">
    <div class="d-flex align-items-top">
      <div class="section-icon">
        <img src="/assets/icones/profil/dossier.svg" alt="Votre dossier" />
      </div>
      <div>
        <div class="section-subtitle">Votre dossier</div>
        <div class="py-1">
          <div class="py-1">
            <b>Statut</b>:
            <span class="label-statut">
              {{ USAGER_DECISION_STATUT_LABELS[usager.decision.statut] }}
            </span>
          </div>

          <div class="py-1">
            <b>Echeance: </b>
            <span>12/12/2021</span>
          </div>
          <div class="py-1">
            <b>Dernier passage: </b>
            {{ usager.lastInteraction.dateInteraction | date: "dd/MM/yyyy" }}
          </div>
        </div>
      </div>
    </div>

    <div class="mt-2 d-flex align-items-top">
      <div class="section-icon">
        <img src="/assets/icones/profil/informations.svg" alt="Votre dossier" />
      </div>
      <div>
        <div class="section-subtitle">Vos informations</div>
        <div class="py-1 font-weight-bold">
          {{ usager.prenom }} {{ usager.nom }}
        </div>
        <div class="py-1 font-weight-bold">
          {{ usager.phone || "Téléphone non renseigné" }}
        </div>
        <div class="py-1 font-weight-bold">
          {{ usager.email || "Email non renseigné" }}
        </div>

        <div class="py-2">
          <button class="btn-outline-primary btn">
            <fa-icon [icon]="['far', 'edit']" class="mr-2"></fa-icon>
            Mettre à jour
          </button>
        </div>
      </div>
    </div>
  </div>
</ng-container>
