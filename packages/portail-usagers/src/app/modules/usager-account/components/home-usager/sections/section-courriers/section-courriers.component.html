<div *ngIf="usager">
  <div
    *ngIf="
      usager.decision.statut === 'INSTRUCTION' &&
      usager.typeDom === 'RENOUVELLEMENT'
    "
    class="my-2 px-3"
  >
    <div class="alert alert-warning">
      <div aria-hidden="true" class="svg-icon icon-calendar"></div>
      <span class="content"
        >Demande de renouvellement actuellement en cours</span
      >
    </div>
  </div>

  <div *ngIf="!usager.lastInteraction.enAttente" class="my-2">
    <h2 class="section-title">Votre courrier</h2>

    <div class="section-content">
      <div class="d-flex align-items-top">
        <div class="py-1">
          <img
            src="/assets/icones/profil/boite-lettre.svg"
            alt=""
            aria-hidden="true"
          />
        </div>
        <p class="py-1 ms-3">
          <b>Vous n’avez pas de nouveau courrier</b>
          <br />
          <i
            >Revenez régulièrement, nous mettons ces informations à jour
            quotidiennement</i
          >
        </p>
      </div>
    </div>
  </div>

  <div
    *ngIf="usager.lastInteraction.enAttente"
    class="fr-text-title--blue-france my-2"
  >
    <h2 class="fr-text-title--blue-france mb-2">Vous avez du courrier !</h2>

    <div class="border-top border-1 border-grey pt-3 mb-2">
      <div class="d-flex align-items-top">
        <div class="d-flex flex-column gap-4">
          <ng-container *ngIf="usager.lastInteraction.courrierIn > 0">
            <div class="d-flex gap-2">
              <span
                class="fr-icon-mail-open-line align-self-start fr-mt-1-5v"
              ></span>
              <div class="d-flex flex-column gap-1">
                <div>
                  <span class="fr-h3 fr-text-title--blue-france">{{
                    usager.lastInteraction.courrierIn
                  }}</span>
                  courrier
                </div>
                <ng-container *ngIf="pendingInteractions.courrierIn?.length">
                  <div
                    *ngFor="let interaction of pendingInteractions.courrierIn"
                  >
                    {{ interaction.dateInteraction | date : "dd MMMM yyyy" }}
                    <ng-container *ngIf="interaction.content"
                      >:
                      <span [innerHTML]="interaction.content | nl2br"></span>
                    </ng-container>
                  </div>
                </ng-container>
              </div>
            </div>
          </ng-container>
          <ng-container *ngIf="usager.lastInteraction.colisIn > 0">
            <div class="d-flex gap-2">
              <span
                class="fr-icon-archive-line align-self-start fr-mt-1-5v"
              ></span>
              <div class="d-flex flex-column gap-1">
                <div>
                  <span class="fr-h3 fr-text-title--blue-france">{{
                    usager.lastInteraction.colisIn
                  }}</span>
                  Colis
                </div>
                <ng-container *ngIf="pendingInteractions.colisIn?.length">
                  <div *ngFor="let interaction of pendingInteractions.colisIn">
                    {{ interaction.dateInteraction | date : "dd MMMM yyyy" }}
                    <ng-container *ngIf="interaction.content"
                      >:
                      <span [innerHTML]="interaction.content | nl2br"></span>
                    </ng-container>
                  </div>
                </ng-container>
              </div>
            </div>
          </ng-container>

          <ng-container *ngIf="usager.lastInteraction.recommandeIn > 0">
            <div class="d-flex gap-2">
              <span
                class="fr-icon-mail-star-line align-self-start fr-mt-1-5v"
              ></span>
              <div class="d-flex flex-column gap-1">
                <div>
                  <span class="fr-h3 fr-text-title--blue-france">{{
                    usager.lastInteraction.recommandeIn
                  }}</span>
                  avis de passage
                </div>
                <ng-container *ngIf="pendingInteractions.recommandeIn?.length">
                  <div
                    *ngFor="let interaction of pendingInteractions.recommandeIn"
                  >
                    {{ interaction.dateInteraction | date : "dd MMMM yyyy" }}
                    <ng-container *ngIf="interaction.content"
                      >:
                      <span [innerHTML]="interaction.content | nl2br"></span>
                    </ng-container>
                  </div>
                </ng-container>
              </div>
            </div>
          </ng-container>
        </div>
      </div>

      <div class="text-center">
        <a
          routerLink="/account/historique"
          class="fr-btn fr-btn--lg fr-btn--secondary gap-1 mt-4 mb-2"
        >
          <span aria-hidden="true" class="fr-icon-time-line"></span>
          Consulter l'historique des courriers
        </a>
      </div>
    </div>
  </div>
</div>
