<div class="fr-container d-flex flex-column mt-5 gap-3">
  <dsfr-button
    [routerLink]="['/account']"
    label="retour"
    type="button"
    variant="secondary"
    buttonSize="MD"
    icon="fr-icon-arrow-left-s-line"
  ></dsfr-button>

  <h2 class="fr-text-title--blue-france fr-mb-n3v">
    Historique des interactions
  </h2>
  <p class="fr-text--sm mb-1">
    Vous trouverez ci-dessous, l'ensemble des courriers, colis et avis de
    passage reçus.
  </p>
  <div class="d-flex flex-column gap-4 border-top border-1 border-grey pt-3">
    <div
      *ngIf="!loading && (!interactions || interactions.length === 0)"
      class="fr-alert fr-alert--info"
    >
      <p>Aucune interaction enregistrée</p>
    </div>

    <div
      *ngFor="let interaction of interactions; let i = index"
      class="fr-text-title--blue-france"
    >
      <ng-container>
        <div class="d-flex gap-2">
          <span
            [ngClass]="interaction.iconClass"
            class="align-self-start fr-mt-1-5v"
          ></span>
          <div class="d-flex flex-column gap-1">
            <span class="fr-text-title--blue-france">
              {{ interaction.dateInteraction | date : "dd MMMM yyyy à HH:mm" }}
            </span>
            <span>{{ interaction.label }}</span>
            <div
              *ngIf="interaction.content"
              class="fr-text--sm mb-0 fr-text-title--grey"
            >
              <span [innerHTML]="interaction.content | nl2br"></span>
            </div>
          </div>
        </div>
      </ng-container>
    </div>
    <dsfr-pagination
      class="d-flex justify-content-center"
      [pageCount]="searchResults.meta.pageCount"
      [currentPage]="searchResults.meta.page"
      [previousOnly]="!searchResults.meta.hasNextPage"
      ariaLabel="Pagination historique des interactions"
      (pageSelect)="getInteractionsByPage($event)"
      (backSelect)="getPreviousPage()"
    ></dsfr-pagination>
  </div>
</div>
