# Installation

## Configuration des variables d'environnement

Créer les fichiers:

- `.env` =>  à partir du fichier `.env.dev.ini`
- `packages/backend/.env` à partir du fichier `packages/backend/.env.example`

## Initialisation de la base de données (docker)

Start Mongo

```sh
docker-compose -f ./docker-compose.local.yml up mongo
docker-compose -f ./docker-compose.local.yml exec -T mongo mongorestore --gzip --archive < dump_test.gzip
docker-compose -f ./docker-compose.local.yml exec -T mongo mongo domifa --eval "db.createUser({user:'travis', pwd:'test', roles:[{role:'readWrite', db:'domifa'}] });"  
```

## Lancement de l'environnement (docker)

Lancer l'environnement de dev:

```bash
APP_DIR=$(pwd) docker-compose -f ./docker-compose.local.yml up
# or rebuild + recreate
APP_DIR=$(pwd) docker-compose -f ./docker-compose.local.yml up --build --force-recreate
```

Enter backend container:

```sh
docker exec -it domifa-backend-dev bash
# run app
# /app/packages/backend
yarn start:dev
```

Enter frontend container:

```sh
docker exec -it domifa-frontend-dev bash
# run app
# /app/packages/frontend
yarn start
```
