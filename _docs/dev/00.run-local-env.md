# Installation

## Configuration des variables d'environnement

Créer les fichiers:

- `.env` => à partir du fichier `.env.dev.example.env`
- `packages/backend/.env` à partir du fichier `packages/backend/.env.backend.dev.example.env`
- `packages/backend/.env.backend.test.local.env` à partir du fichier `packages/backend/.env.backend.test.local.example.env`
- `packages/backend/ormconfig.json` à partir du fichier `packages/backend/ormconfig.dev.example.json`
- `optional/e2e/.env` à partir du fichier `optional/e2e/.env.e2e.local.example.env`

## Lancement de l'environnement (docker)

Lancer l'environnement de dev:

```bash
./docker-compose.local.run.sh
```

Pour purger complètement son environnement:

__ATTENTION__: cela va supprimer les bases de données et tous les volumes docker contenant le mot `domifa`:

```bash
./docker-compose.local.run.sh --remove-domifa-containers --drop-domifa-volumes
```

## Initialisation des bases de données Mongo+Postgres (docker)

Les bases de données sont initialisées automatiquement lors dla création du container de dev (à partir des dumps de test).

Voir [./20.databases.md](./20.databases.md)

## Démarrage de l'application (docker)

Enter backend container:

```sh
docker exec -it domifa-backend bash
# run app
# /app/packages/backend
yarn start:dev
```

Enter frontend container:

```sh
docker exec -it domifa-frontend bash
# run app
# /app/packages/frontend
yarn start
```
